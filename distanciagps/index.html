<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Triangle Rectangle — Teorema de Pitàgores</title>
  <style>
    body{margin:16px;font-family:sans-serif;background:#f7fafc;color:#0f172a}
    h1{font-size:1.4rem;margin:0 0 12px}
    .inputs{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:16px}
    .box{background:white;padding:12px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
    label{display:block;margin-top:4px;font-size:0.9rem}
    input{width:100px;padding:6px;margin-top:2px;border:1px solid #ccc;border-radius:6px}
    button{margin-top:12px;background:#0369a1;color:white;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    #steps{background:#0f172a;color:#e6eef8;padding:12px;border-radius:8px;min-height:160px;overflow:auto}
    canvas{margin-top:16px;border:1px solid #ccc;border-radius:8px;background:#fff}
  </style>
  <script>
    window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]}};
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
  <h1>Triangle Rectangle — Teorema de Pitàgores pas a pas</h1>
  <div class="inputs">
    <div class="box">
      <h2>Punt A</h2>
      <label>x₁: <input type="number" id="x1" value="0"></label>
      <label>y₁: <input type="number" id="y1" value="0"></label>
    </div>
    <div class="box">
      <h2>Punt B</h2>
      <label>x₂: <input type="number" id="x2" value="3"></label>
      <label>y₂: <input type="number" id="y2" value="4"></label>
    </div>
  </div>
  <button id="btnCalc">Calcula distància</button>
  <div id="steps"><em>Els passos es mostraran aquí...</em></div>
  <canvas id="sketch" width="500" height="350"></canvas>

  <script>
    const stepsEl=document.getElementById('steps');
    const canvas=document.getElementById('sketch');
    const ctx=canvas.getContext('2d');

    document.getElementById('btnCalc').onclick=()=>{
      const x1=parseFloat(document.getElementById('x1').value);
      const y1=parseFloat(document.getElementById('y1').value);
      const x2=parseFloat(document.getElementById('x2').value);
      const y2=parseFloat(document.getElementById('y2').value);

      const dx=x2-x1;
      const dy=y2-y1;
      const c=Math.sqrt(dx*dx+dy*dy);

      // Steps amb LaTeX
      stepsEl.innerHTML=`
        <h3>1) Diferències</h3>
        $$\\Delta x = x_2 - x_1 = ${x2} - ${x1} = ${dx}$$
        $$\\Delta y = y_2 - y_1 = ${y2} - ${y1} = ${dy}$$
        <h3>2) Teorema de Pitàgores</h3>
        $$c=\\√{(\\Delta x)^2+(\\Delta y)^2}$$
        $$c=\\√{(${dx})^2+(${dy})^2}$$
        $$c=\\√{${(dx*dx).toFixed(2)}+${(dy*dy).toFixed(2)}}$$
        $$c=${c.toFixed(3)}$$
      `;
      MathJax.typesetPromise();

      drawTriangle(x1,y1,x2,y2,dx,dy,c);
    };

    function drawTriangle(x1,y1,x2,y2,dx,dy,c){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      const margin=40;
      const W=canvas.width-margin*2;
      const H=canvas.height-margin*2;
      const max=Math.max(Math.abs(dx),Math.abs(dy));
      const scale= (max===0)?1:Math.min(W/Math.abs(dx||1), H/Math.abs(dy||1))*0.8;

      const x0=margin;
      const y0=canvas.height-margin;
      const Ax=x0, Ay=y0;
      const Bx=x0+dx*scale, By=y0-dy*scale;

      ctx.beginPath();
      ctx.moveTo(Ax,Ay);
      ctx.lineTo(Bx,Ay);
      ctx.lineTo(Bx,By);
      ctx.closePath();
      ctx.strokeStyle='#0f172a';
      ctx.lineWidth=2;
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(Ax,Ay); ctx.lineTo(Bx,By); ctx.stroke();

      ctx.fillStyle='#0369a1';
      ctx.beginPath(); ctx.arc(Ax,Ay,5,0,2*Math.PI); ctx.fill(); ctx.fillText('A',Ax-15,Ay+15);
      ctx.fillStyle='#ef4444';
      ctx.beginPath(); ctx.arc(Bx,By,5,0,2*Math.PI); ctx.fill(); ctx.fillText('B',Bx+10,By-10);

      ctx.fillStyle='#0f172a';
      ctx.fillText(`Δx=${dx}`, (Ax+Bx)/2, Ay-5);
      ctx.fillText(`Δy=${dy}`, Bx+5, (Ay+By)/2);
      ctx.fillText(`c=${c.toFixed(2)}`, (Ax+Bx)/2, (Ay+By)/2);
    }
  </script>
</body>
</html>
