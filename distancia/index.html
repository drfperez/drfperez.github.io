<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <title>Mini Transat 2025 ‚Äì C√†lculs de Dist√†ncia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      font-family: sans-serif;
      padding: 1em;
      max-width: 500px;
      margin: auto;
      line-height: 1.6;
    }
    h1, h2 { color: #003366; }
    .formula {
      background: #f9f9f9;
      border-left: 4px solid #0077cc;
      padding: 1em;
      margin: 1em 0;
      font-size: 1em;
      overflow-x: auto;
    }
    svg { display: block; margin: 2em auto; max-width: 100%; }
    #map { height: 300px; margin-top: 2em; }
    code { background: #eee; padding: 2px 4px; border-radius: 4px; }
  </style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
<div id="navbar-placeholder"></div>

  <main class="container py-4">

 
  <h1>Mini Transat 2025 ‚Äì C√†lcul de Dist√†ncia entre dos punts</h1>

  <h2>1. Coordenades dels punts</h2>
  <p><strong>Sortida (Les Sables-d‚ÄôOlonne):</strong> \( \phi_1 = 46.5^\circ, \lambda_1 = -1.78^\circ \)</p>
  <p><strong>Arribada (Guadeloupe):</strong> \( \phi_2 = 16.25^\circ, \lambda_2 = -61.5^\circ \)</p>

  <h2>2. Conversi√≥ a radians</h2>
  <div class="formula">
    \( \phi_1 = 46.5 \times \frac{\pi}{180} = 0.8116 \, \text{rad} \)<br>
    \( \lambda_1 = -1.78 \times \frac{\pi}{180} = -0.0311 \, \text{rad} \)<br>
    \( \phi_2 = 16.25 \times \frac{\pi}{180} = 0.2837 \, \text{rad} \)<br>
    \( \lambda_2 = -61.5 \times \frac{\pi}{180} = -1.0734 \, \text{rad} \)
  </div>

  <h2>3. Teorema de Pit√†gores ‚Äì Sense correcci√≥</h2>
  <p>Utilitzem nom√©s la difer√®ncia directa en radians:</p>
  <div class="formula">
    \( x = \lambda_2 - \lambda_1 = -1.0423 \, \text{rad} \)<br>
    \( y = \phi_2 - \phi_1 = -0.528 \, \text{rad} \)<br>
    \( d_{\text{angular}} = \sqrt{x^2 + y^2} = \sqrt{1.086 + 0.278} = \sqrt{1.364} = 1.168 \, \text{rad} \)<br>
    \( d = 6371 \cdot 1.168 = \boxed{7438 \, \text{km}} \)
  </div>

  <h2>4. Teorema de Pit√†gores ‚Äì Amb correcci√≥ de longitud</h2>
  <p>Compensem l‚Äôescalament longitudinal amb el cosinus de la latitud mitjana.</p>
  <div class="formula">
    \( \phi_m = \frac{\phi_1 + \phi_2}{2} = 0.5477 \, \text{rad} \)<br>
    \( \cos(\phi_m) = 0.854 \)<br>
    \( x = \Delta \lambda \cdot \cos(\phi_m) = -1.0423 \cdot 0.854 = -0.890 \, \text{rad} \)<br>
    \( y = -0.528 \, \text{rad} \)<br>
    \( d = 6371 \cdot \sqrt{(-0.890)^2 + (-0.528)^2} = 6371 \cdot \sqrt{0.793 + 0.278} = 6371 \cdot \sqrt{1.071} = \boxed{6594 \, \text{km}} \)
  </div>

  <h2>5. Visualitzaci√≥ del triangle i catets</h2>
  <p>Aqu√≠ representem gr√†ficament els catets horitzontal i vertical amb la dist√†ncia.</p>
  <svg width="300" height="220" viewBox="0 0 300 220">
    <line x1="50" y1="50" x2="240" y2="50" stroke="blue" stroke-width="2" />
    <line x1="240" y1="50" x2="240" y2="170" stroke="green" stroke-width="2" />
    <line x1="50" y1="50" x2="240" y2="170" stroke="red" stroke-width="2" />
    <text x="130" y="40" fill="blue">x (longitud)</text>
    <text x="165" y="90" fill="green">y (latitud)</text>
    <text x="60" y="130" fill="red">d (dist√†ncia)</text>
  </svg>

  <h2>6. C√†lcul amb Haversine (trigonometria esf√®rica)</h2>
  <div class="formula">
    \( \Delta \phi = -0.528 \)<br>
    \( \Delta \lambda = -1.0423 \)<br>
    \( a = \sin^2(-0.264) + \cos(0.8116) \cdot \cos(0.2837) \cdot \sin^2(-0.521) = 0.069 + 0.157 = 0.226 \)<br>
    \( c = 2 \cdot \arctan2(\sqrt{0.226}, \sqrt{1-0.226}) = 0.98 \, \text{rad} \)<br>
    \( d = 6371 \cdot 0.98 = \boxed{6244 \, \text{km}} \)
  </div>

  <h2>7. Conversi√≥ a milles n√†utiques</h2>
  <div class="formula">
    \( \text{Dist√†ncia sense correcci√≥} = \frac{7438}{1.852} = 4016 \, \text{MN} \)<br>
    \( \text{Dist√†ncia amb correcci√≥} = \frac{6594}{1.852} = 3560 \, \text{MN} \)<br>
    \( \text{Dist√†ncia Haversine} = \frac{6244}{1.852} = 3371 \, \text{MN} \)
  </div>

  <h2>8. Comparaci√≥ final</h2>
  <ul>
    <li><strong>Pit√†gores sense correcci√≥:</strong> 7438 km (4016 MN)</li>
    <li><strong>Pit√†gores amb correcci√≥:</strong> 6594 km (3560 MN)</li>
    <li><strong>Haversine:</strong> 6244 km (3371 MN)</li>
  </ul>
 

<p>
  <strong>1. Pit√†gores sense correcci√≥:</strong> Aquest m√®tode tracta la superf√≠cie terrestre com un pla cartesi√†, i calcula la dist√†ncia entre dos punts usant directament la difer√®ncia entre latituds i longituds expressades en radians. Tot i ser senzill i intu√Øtiu, no t√© en compte que la Terra √©s una esfera (o geoide), i per tant produeix una <em>sobreestimaci√≥ significativa</em> en dist√†ncies llargues com la de la Mini Transat. Aquest model dona una dist√†ncia de 7438 km, que √©s clarament superior a la real.
</p>

<p>
  <strong>2. Pit√†gores amb correcci√≥ longitudinal:</strong> Aquest m√®tode millora l'anterior tenint en compte que la dist√†ncia en longitud disminueix a mesura que ens allunyem de l'equador. Per aix√≤, s‚Äôaplica el cosinus de la latitud mitjana com a factor d‚Äôescala per ajustar la component horitzontal (longitudinal). Aix√≤ redueix la dist√†ncia calculada fins a uns 6594 km, la qual cosa √©s una millor aproximaci√≥, per√≤ encara assumeix una geometria plana i ignora completament la curvatura real de la Terra.
</p>

<p>
  <strong>3. F√≥rmula de Haversine:</strong> Aquest √©s el m√®tode m√©s prec√≠s dels tres per calcular dist√†ncies entre dos punts sobre l‚Äôesfera terrestre. Fa √∫s de funcions trigonom√®triques per determinar l‚Äôangle central entre els punts i despr√©s calcula la dist√†ncia real sobre la superf√≠cie. √âs especialment √∫til per trajectes llargs com travesses oce√†niques, ja que considera la curvatura de la Terra. En aquest cas, la dist√†ncia resultant √©s de 6244 km, i es considera la millor estimaci√≥ per rutes globals com la Mini Transat.
</p>


  <h2>9. Visualitzaci√≥ sobre el mapa</h2>
    
  <div id="map"></div>
  <p>üî¥ Esf√®rica (Haversine), üîµ Plana amb correcci√≥, üü¢ Catets sense correcci√≥</p>

 <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const start = [46.5, -1.78];
  const end = [16.25, -61.5];
  const map = L.map('map').setView([30, -30], 3);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);

  // üìç Marcadors exactes
  L.marker(start).addTo(map).bindPopup("üî¥ Sortida: Les Sables-d‚ÄôOlonne").openPopup();
  L.marker(end).addTo(map).bindPopup("üü¢ Arribada: Guadeloupe");

  // ‚úÖ Ruta Haversine (gran cercle interpolada)
  function interpolateGreatCircle(lat1, lon1, lat2, lon2, steps) {
    const toRad = deg => deg * Math.PI / 180;
    const toDeg = rad => rad * 180 / Math.PI;

    const œÜ1 = toRad(lat1), Œª1 = toRad(lon1);
    const œÜ2 = toRad(lat2), Œª2 = toRad(lon2);

    const d = 2 * Math.asin(Math.sqrt(
      Math.pow(Math.sin((œÜ2 - œÜ1) / 2), 2) +
      Math.cos(œÜ1) * Math.cos(œÜ2) * Math.pow(Math.sin((Œª2 - Œª1) / 2), 2)
    ));

    const points = [];
    for (let i = 0; i <= steps; i++) {
      const f = i / steps;
      const A = Math.sin((1 - f) * d) / Math.sin(d);
      const B = Math.sin(f * d) / Math.sin(d);

      const x = A * Math.cos(œÜ1) * Math.cos(Œª1) + B * Math.cos(œÜ2) * Math.cos(Œª2);
      const y = A * Math.cos(œÜ1) * Math.sin(Œª1) + B * Math.cos(œÜ2) * Math.sin(Œª2);
      const z = A * Math.sin(œÜ1) + B * Math.sin(œÜ2);

      const œÜ = Math.atan2(z, Math.sqrt(x * x + y * y));
      const Œª = Math.atan2(y, x);

      points.push([toDeg(œÜ), toDeg(Œª)]);
    }

    return points;
  }

  const greatCirclePoints = interpolateGreatCircle(start[0], start[1], end[0], end[1], 100);
  L.polyline(greatCirclePoints, { color: 'red', weight: 3 }).addTo(map);

  // üü© Catets de Pit√†gores (sense correcci√≥)
  const intermediatePoint = [start[0], end[1]]; // mateixes latitud i longitud creuada
  L.polyline([start, intermediatePoint], { color: 'green', weight: 2 }).addTo(map);
  L.polyline([intermediatePoint, end], { color: 'orange', weight: 2 }).addTo(map);
  L.marker(intermediatePoint).addTo(map).bindPopup("üìê Punt intermedi catets");

  // üîµ L√≠nia plana amb correcci√≥ (visualment igual a recta per√≤ amb estil diferent)
  L.polyline([start, end], {
    color: 'blue',
    weight: 2,
    opacity: 0.6,
    dashArray: '6, 4'
  }).addTo(map);
</script>


  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(', '\\)'], ['$', '$']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../navbar.js"></script>
</body>
</html>
