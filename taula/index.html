<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    #container {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .area {
      flex: 1;
      display: flex;
      flex-direction: column;
      position: relative;
      box-sizing: border-box;
      border: 1px solid #ccc;
      overflow: hidden;
    }

    .area-title {
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      background-color: #f2f2f2;
      padding: 5px;
      font-weight: bold;
      box-sizing: border-box;
      z-index: 1;
    }

    #codeEditorContainer {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    #codeEditor {
      flex: 1;
      height: 100%;
      padding: 10px;
      border: 1px solid #ccc;
    }

    .CodeMirror {
      height: 100%;
    }

    #runButton {
      width: fit-content;
      margin: 10px auto;
      display: block;
    }

    #outputContainer {
      flex: 1;
      display: flex;
      flex-direction: column;
      border: 1px solid #ccc;
      margin-top: 10px;
      padding: 5px;
      overflow: auto;
    }

    #consoleArea {
      flex: 1;
      display: flex;
      flex-direction: column;
      border: 1px solid #ccc;
      background-color: #f2f2f2;
      margin-top: 10px;
      padding-top: 20px;
      overflow: auto;
    }

    #outputFrame {
      width: 100%;
      height: 100%;
      border: none;
    }

    #planetImage {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/codemirror.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/htmlmixed/htmlmixed.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/xml/xml.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/css/css.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/javascript/javascript.js"></script>
  
</head>
<body>
  <div id="container">
    <div class="area">
      <div class="area-title">Code Editor</div>
      <div id="codeEditorContainer">
        <textarea id="codeEditor">
          
<!-- Your code goes here -->
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<title>Table with Dropdowns</title>
	<style>
		.selected {
			background-color: yellow;
		}
	</style>
	<script>
		function showContent() {
			var row = document.getElementById("row-select").value;
			var col = document.getElementById("col-select").value;
			var content = document.getElementById("table").rows[parseInt(row)+1].cells[col].innerHTML;
			document.getElementById("content-div").innerHTML = content;
			document.getElementById("content-div").style.display = "block";
			
			// Highlight selected cell
			var cells = document.getElementById("table").rows[parseInt(row)+1].cells;
			for (var i = 0; i < cells.length; i++) {
				cells[i].classList.remove("selected");
			}
			cells[col].classList.add("selected");
		}
		
		function showRow() {
			var row = document.getElementById("row-select").value;
			var cells = document.getElementById("table").rows[parseInt(row)+1].cells;
			for (var i = 0; i < cells.length; i++) {
				cells[i].classList.add("selected");
			}
		}
		
		function toggleTable() {
		    var tableContainer = document.getElementById("table-container");
		    var button = document.getElementById("toggle-table-btn");
		    if (tableContainer.style.display === "none") {
		        tableContainer.style.display = "block";
		        button.textContent = "Hide Table";
		    } else {
		        tableContainer.style.display = "none";
		        button.textContent = "Show Table";
		    }
		}
	</script>
</head>
<body>
	<div id="table-container">
		<table id="table">
			<thead>
				<tr>
					<th></th>
					<th>Column 1</th>
					<th>Column 2</th>
					<th>Column 3</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th>Row 1</th>
					<td>Content 1,1</td>
					<td>Content 1,2</td>
					<td>Content 1,3</td>
				</tr>
				<tr>
					<th>Row 2</th>
					<td>Content 2,1</td>
					<td>Content 2,2</td>
					<td>Content 2,3</td>
				</tr>
				<tr>
					<th>Row 3</th>
					<td>Content 3,1</td>
					<td>Content 3,2</td>
					<td>Content 3,3</td>
				</tr>
			</tbody>
		</table>
	</div>
	<br>
	<label for="row-select">Select a row:</label>
	<select id="row-select">
		<option value="0">Row 1</option>
		<option value="1">Row 2</option>
		<option value="2">Row 3</option>
</select>
<br><br>
<label for="col-select">Select a column:</label>
<select id="col-select">
	<option value="1">Column 1</option>
	<option value="2">Column 2</option>
	<option value="3">Column 3</option>
</select>
<br><br>
<button id="toggle-table-btn" onclick="toggleTable()">Hide Table</button>
<button onclick="showContent()">Show Content</button>
<button onclick="showRow()">Highlight Row</button>
<button onclick="location.reload(true)">Restart table</button>
<div id="content-div" style="display: none;"></div>
</body>
</html>
  </script>
</body>
</html>
        </textarea>
      </div>
    </div>
    <button id="runButton" onclick="runCode()">Run</button>
    <div class="area">
      <div class="area-title">Output</div>
      <div id="outputContainer">
        <iframe id="outputFrame" frameborder="0" scrolling="yes"></iframe>
      </div>
    </div>

    <div class="area">
      <div class="area-title">Console</div>
      <div id="consoleArea">
        <div id="consoleOutput"></div>
      </div>
    </div>
  </div>
  <script>
    var editor = CodeMirror.fromTextArea(document.getElementById("codeEditor"), {
      lineNumbers: true,
      mode: "htmlmixed",
      htmlMode: true,
      theme: "default",
    });

    function runCode() {
      var code = editor.getValue();
      var iframe = document.getElementById("outputFrame");

      // Clear previous console messages
      var consoleOutput = document.getElementById("consoleOutput");
      consoleOutput.innerHTML = "";

      iframe.contentWindow.console = {
        log: function () {
          var output = document.createElement("div");
          output.textContent = Array.from(arguments).join(" ");
          consoleOutput.appendChild(output);
        },
        error: function () {
          var output = document.createElement("div");
          output.textContent = "Error: " + Array.from(arguments).join(" ");
          output.style.color = "red";
          consoleOutput.appendChild(output);
        }
      };

      iframe.contentDocument.open();
      iframe.contentDocument.write(code);
      iframe.contentDocument.close();
    }
  </script>
</body>
</html>
