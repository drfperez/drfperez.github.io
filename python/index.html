<html>
<head>
    <meta charset="utf-8">
    <title>Pyodide v0.23.3 REPL example</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.3/full/pyodide.js"></script>
      <!-- Include the Bootstrap JS file -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
      <!-- Include the Bootstrap CSS file -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
      
</head>
<body>  
<div id="navbarContainer"></div>

  <!-- Include your other page content here -->

  <script>
    // Fetch and insert the navbar.html content
    fetch("https://pompeu.neocities.org/navbar.html")
      .then(response => response.text())
      .then(content => {
        document.getElementById("navbarContainer").innerHTML = content;
      })
      .catch(error => {
        console.log("Error fetching navbar.html:", error);
      });
  </script>
    <div id="simple-example">

        Output:
        <textarea id='output' style='width: 100%;' rows='10' disabled></textarea>
        <textarea id='code' rows='3'>
import sys
import math

# Solve the quadratic equation: ax^2 + bx + c = 0

a = 2
b = -7
c = 3

# Calculate discriminant
discriminant = b**2 - 4*a*c

# Check if the equation has real roots
if discriminant >= 0:
    # Calculate the two roots
    root1 = (-b + math.sqrt(discriminant)) / (2*a)
    root2 = (-b - math.sqrt(discriminant)) / (2*a)

    # Print the roots
    print("Root 1:", root1)
    print("Root 2:", root2)
else:
    print("No real roots")
    

            </textarea>
        <button id='run' onclick='evaluatePython()'>Run</button>
        <div>You can execute any Python code. Just enter something in the box above and click the button. </div>

        <script type='text/javascript'>
            const output = document.getElementById("output")
            const code = document.getElementById("code")

            function addToOutput(s) {
                output.value += `${s}\n`
                output.scrollTop = output.scrollHeight
            }

            async function evaluatePython() {
                addToOutput(`>>>${code.value}`)

                try {
                    // Since pyodide 0.18.0, you must call loadPackagesFromImports() 
                    // to import any python packages referenced via import statements in your code.
                    // This function will no longer do it for you.
                    await pyodide.loadPackagesFromImports(code.value, addToOutput, addToOutput)
                    let result = await pyodide.runPythonAsync(code.value)
                    addToOutput(`${result}`)
                }
                catch (e) {
                    addToOutput(`${e}`)
                }
                code.value = ''
            }

            (async () => { // enable await 
                output.value = 'Initializing...\n'

                // init Pyodide
                window.pyodide = await loadPyodide({ stdout: addToOutput, stderr: addToOutput }) // redirect stdout and stderr to addToOutput
                output.value += 'Ready!\n'

            })(); // execute immediately
        </script>
    </div>
</body>

</html>
